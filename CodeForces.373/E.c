#include <stdio.h>

#define MOD 1000000007

typedef unsigned long long ull;

typedef struct { ull a, b, c, d; } matrix;

void mult_matrix(matrix *c, matrix a)
{
	matrix b = { c->a, c->b, c->c, c->d };
	
	c->a = (a.a * b.a % MOD + a.b * b.c % MOD) % MOD;
	c->b = (a.a * b.b % MOD + a.b * b.d % MOD) % MOD;
	c->c = (a.c * b.a % MOD + a.d * b.c % MOD) % MOD;
	c->d = (a.c * b.b % MOD + a.d * b.d % MOD) % MOD;
}

const matrix fibMatrices[] =
{
    { 1, 1, 1, 0 },
    { 2, 1, 1, 1 },
    { 5, 3, 3, 2 },
    { 34, 21, 21, 13 },
    { 1597, 987, 987, 610 },
    { 3524578, 2178309, 2178309, 1346269 },
    { 680057396, 209783453, 209783453, 470273943 },
    { 461493940, 700290221, 700290221, 761203726 },
    { 361271126, 745621702, 745621702, 615649431 },
    { 169404872, 330235873, 330235873, 839169006 },
    { 509132326, 754854590, 754854590, 754277743 },
    { 619090179, 961030536, 961030536, 658059650 },
    { 710733020, 124518512, 124518512, 586214508 },
    { 904490577, 198180511, 198180511, 706310066 },
    { 820363066, 314263529, 314263529, 506099537 },
    { 314154357, 787294282, 787294282, 526860082 },
    { 462302286, 269256820, 269256820, 193045466 },
    { 753779744, 462470690, 462470690, 291309054 },
    { 99340384, 139070082, 139070082, 960270309 },
    { 396291187, 932065818, 932065818, 464225376 },
    { 797324391, 580737058, 580737058, 216587333 },
    { 207144289, 545755243, 545755243, 661389053 },
    { 342001797, 798765759, 798765759, 543236045 },
    { 617131563, 810968381, 810968381, 806163189 },
    { 762936619, 635507288, 635507288, 127429331 },
    { 810673575, 251205278, 251205278, 559468297 },
    { 856267792, 445892347, 445892347, 410375445 },
    { 205622103, 804101592, 804101592, 401520518 },
    { 677058375, 699722224, 699722224, 977336158 },
    { 281012212, 900885101, 900885101, 380127118 },
    { 262980391, 912848361, 912848361, 350132037 },
    { 913743539, 90779811, 90779811, 822963728 }
};

ull fib(ull n)
{
	if (n == 0) return 0;

	matrix mat = { 1, 0, 0, 1 };
	n--;
	
	int i = 0;
	while (n)
	{
		if (n%1) mult_matrix(&mat, fibMatrices[i]);
		i++;
	}

	return mat.a;
}

long arr[100002];
long bit[100002];
long bit_size;

void bit_update(long id, long x)
{
	long old_x = arr[id];
	arr[id] += x;

	long new_val = fib(old_x + x) - fib(old_x);

	while (id <= bit_size)
	{
		bit[id] = (bit[id] + new_val) % MOD;
		id += (id & -id);
	}
}

long bit_query(long id)
{
	long result = 0;
	
	while (id)
	{
		result = (result + bit[id]) % MOD;
		id -= (id & -id);
	}

	return result;
}

int main()
{
	long n, m;

	scanf("%ld%ld", &n, &m);
	bit_size = n;

	for (long i = 1; i <= n; i++) arr[i] = bit[i] = 0;
	for (long i = 1; i <= n; i++)
	{
		long v;
		scanf("%ld", &v);

		bit_update(i, v);
	}

	while (m--)
	{
		long c, l, r;
		scanf("%ld%ld%ld", &c, &l, &r);

		if (c == 1)
		{
			long x;
			scanf("%ld", &x);
			while (l <= r) bit_update(l++, x);
		}
		else if (c == 2)
			printf("%ld\n", bit_query(r) - bit_query(l-1));
	}
}
